<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel & Camping Checklist</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            font-size: 16px;
        }
        h1, h2, h3 {
            color: #7b8ff3;
            border-bottom: 2px solid #7b8ff3;
            padding-bottom: 10px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #2a2a2e;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .instructions {
            margin-bottom: 25px;
            list-style-type: disc;
            padding-left: 20px;
            color: #bbb;
        }
        .instructions li {
            margin-bottom: 8px;
        }
        .controls-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        .control-group label {
            font-weight: bold;
            margin-right: 10px;
        }
        select {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #7b8ff3;
            background-color: #333;
            color: #e0e0e0;
            font-size: 1em;
            cursor: pointer;
        }
        select:focus {
            outline: none;
            border-color: #98a9f5;
        }
        .morning-pack-container {
            border: 2px dashed #f0ad4e;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            background-color: #3a362e;
        }
        .morning-pack-container h3 {
            color: #f0ad4e;
            border-color: #f0ad4e;
            margin-top: 0;
        }
        .category-section {
            background-color: #333;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .category-section h3 {
            margin-top: 0;
            font-size: 1.2em;
        }
        .checklist-item, .morning-item {
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            gap: 15px;
            padding: 10px 5px;
            border-bottom: 1px solid #444;
        }
        .morning-item {
            grid-template-columns: auto 1fr;
        }
        .checklist-item:last-child {
            border-bottom: none;
        }
        .checklist-item > span, .morning-item > span {
            grid-column: 1;
        }
        .morning-item > span {
            grid-column: 2;
        }
        .checklist-item .checkbox-group {
            grid-column: 2;
            display: flex;
            align-items: center;
            gap: 15px;
            white-space: nowrap;
            font-size: 0.9em;
        }
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #7b8ff3;
            cursor: pointer;
        }
        .checkbox-group label {
            font-weight: normal;
            color: #ccc;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        .completed {
            text-decoration: line-through;
            color: #777;
        }
        .hidden-packed {
            display: none !important;
        }
        .morning-item .checkbox-packed {
            grid-column: 1;
        }
        .add-item-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #333;
            border-radius: 8px;
        }
        .add-item-section h3 {
            margin-top: 0;
        }
        .add-item-section input[type="text"] {
            width: calc(100% - 130px);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #7b8ff3;
            background-color: #2a2a2e;
            color: #e0e0e0;
            font-size: 1em;
            margin-right: 10px;
        }
        .button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            color: white;
            transition: background-color 0.2s;
        }
        .add-button {
            background-color: #5cb85c;
        }
        .add-button:hover {
            background-color: #4cae4c;
        }
        .reset-button {
            background-color: #c9302c;
        }
        .reset-button:hover {
            background-color: #d9534f;
        }
        .settings-toggle {
            cursor: pointer;
            font-weight: bold;
            color: #7b8ff3;
            display: inline-block;
            margin-top: 30px;
            padding: 8px;
            border: 1px dashed #7b8ff3;
            border-radius: 5px;
        }
        .settings-content {
            display: none;
            margin-top: 15px;
        }
        
        /* Mobile optimization */
        @media (max-width: 600px) {
            .checklist-item {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            .checklist-item .checkbox-group {
                grid-column: 1;
                justify-content: space-between;
                margin-top: 5px;
            }
            .add-item-section input[type="text"] {
                width: 100%;
                margin-bottom: 10px;
            }
            .add-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Nathan & Michelle's Travel Checklist</h1>

        <ul class="instructions">
            <li>Select your destination type (e.g., Overseas) to generate a packing list.</li>
            <li>Use the "Pack in AM" checkbox for items used on departure morning (e.g., toiletries, fruit); they appear in the top yellow box.</li>
            <li>Add custom items at the bottom if needed.</li>
        </ul>

        <div class="controls-container">
            <div class="control-group">
                <label for="checklist-type">Checklist Type:</label>
                <select id="checklist-type" onchange="handleChecklistChange()">
                    <option value="camping">Camping</option>
                    <option value="local">Local Travel</option>
                    <option value="overseas">Overseas Travel</option>
                </select>
            </div>
            <div class="control-group">
                <label for="filter-packed">View:</label>
                <select id="filter-packed" onchange="handleFilterChange()">
                    <option value="all">Show All</option>
                    <option value="unpacked">Hide Packed</option>
                </select>
            </div>
        </div>

        <div id="morning-pack-container" class="morning-pack-container" style="display: none;">
            <h3>To Pack in the Morning</h3>
            <div id="morning-list"></div>
        </div>

        <div id="checklist-container"></div>
        
        <div class="add-item-section">
            <h3>Add Custom Item</h3>
            <div style="display: flex; flex-wrap: wrap;">
                <input type="text" id="custom-item-input" placeholder="e.g., Yoga ball">
                <button class="button add-button" onclick="addCustomItem()">Add Item</button>
            </div>
        </div>

        <div class="settings-toggle" onclick="toggleSettings()">⚙️ Settings</div>
        <div class="settings-content" id="settings-content">
            <button class="button reset-button" onclick="resetChecklist()">Reset Current Checklist</button>
        </div>
    </div>

    <script>
        const checklistData = {
            camping: {
                "Shelter & Sleeping": [
                    "Tent, poles, stakes", "Tent footprint/groundsheet", "Tarp", "Sleeping bags", "Sleeping pads / Air mattress", "Pillows", "Pump for air mattress", "Tent repair kit", "Mallet/hammer"
                ],
                "Cooking & Kitchen": [
                    "Stove and fuel", "Pots and pans", "Cooking utensils (spatula, tongs)", "Plates, bowls, cutlery", "Mugs", "Cooler / Esky", "Ice/Gel packs", "Water bottles", "Water purification", "Dish soap (biodegradable) & sponge", "Trash bags", "Paper towels", "Ziploc bags", "Can/Bottle opener", "Coffee/tea maker", "Cutting board", "Knife set", "Oil & Spices", "Thermos", "Fire extinguisher"
                ],
                "Clothing": [
                    "Base layers", "Fleece/Insulated jacket", "Rain jacket & pants", "Hiking pants/shorts", "Underwear & Socks (wool/synthetic)", "Thermals", "Pajamas", "Warm Hat & Gloves", "Camp shoes (sandals)", "Hiking boots", "Laundry bag"
                ],
                "Safety & First Aid": [
                    "First-aid kit (blister care, antiseptic)", "Headlamps/Flashlights (extra batteries)", "Power bank", "Map/Compass/GPS", "Multi-tool/Knife", "Lighter/Matches/Fire starter", "Insect repellent", "Sunscreen"
                ],
                "Hygiene": [
                    "Toiletries (Toothbrush/paste)", "Quick-dry towel", "Hand sanitizer", "Toilet paper", "Trowel (for digging cat holes)", "Biodegradable soap", "Meds"
                ],
                "Baby Gear": [
                    "Portable crib / Pack-n-play", "Baby sleeping bag", "Baby carrier (hiking)", "Outdoor blanket/Play mat", "Sun hat", "Baby sunscreen", "Diapers & Wipes", "Changing pad", "Diaper bags", "Bottles/Formula/Food", "Sippy cup", "High chair", "Meds (Thermometer, Panadol)", "Toys/Books", "Bibs"
                ],
                "Miscellaneous": [
                    "Camp chairs", "Table", "Duct tape", "Games/Books", "Camera", "Binoculars"
                ]
            },
            local: {
                "Essentials": [
                    "Wallet (ID, cards)", "Keys", "Phone & Charger", "Power bank", "Meds", "First-aid kit", "Car docs"
                ],
                "Clothing": [
                    "Tops/Pants", "Jacket", "Underwear/Socks", "Pajamas", "Swimsuit", "Shoes/Sandals", "Laundry bag", "Hat"
                ],
                "Toiletries": [
                    "Toothbrush/paste", "Deodorant", "Shampoo/Soap", "Glasses/Contacts", "Shaver", "Sunscreen"
                ],
                "Electronics": [
                    "Laptop/Tablet & Chargers", "Camera", "Headphones"
                ],
                "Baby Gear": [
                    "Diaper bag", "Diapers/Wipes", "Changing pad", "Portacot/Bassinet", "Car seat", "Stroller", "Carrier", "Bottles/Formula", "Food/Snacks", "Bibs", "Outfits", "Pajamas", "Blanket", "Toys/Books", "Meds", "Monitor", "Sound machine"
                ],
                "Pre-Departure": [
                    "Toss old fruit/food", "Get neighbours to take care of pet", "Empty trash", "Water plants", "Hide valuables", "Lock windows/doors"
                ]
            },
            overseas: {
                "Pre-Departure Tasks": [
                    "Toss old fruit/food", "Get neighbours to take care of pet", "Empty trash", "Hide valuables", "Water plants", "Check in online", "Download offline maps", "Hold mail (if needed)"
                ],
                "Documents & Money": [
                    "Passports & Visas", "Flight tickets (Digital/Print)", "Hotel reservations", "Wallet (ID, cards)", "Cash / Local currency", "Buy mobile phone data package", "Intl Driving Permit", "Travel Insurance Policy", "Copies of important docs"
                ],
                "Electronics": [
                    "Phone & Charger", "Laptop", "Power bank", "Universal Adapter", "Earphones / Headphones", "Kindle / E-reader", "Camera & spare battery", "Local SIM ejector tool"
                ],
                "Clothing": [
                    "Shirts / Tops", "Pants / Shorts", "Jacket / Raincoat", "Underwear & Socks", "Pajamas", "Swimsuit", "Walking shoes", "Sandals", "Hat", "Laundry bag"
                ],
                "Toiletries": [
                    "Toiletries bag", "Toothbrush/Paste/Floss", "Deodorant", "Shampoo/Conditioner/Soap", "Skincare", "Sunscreen", "Glasses / Contacts", "Electric Shaver", "Hand sanitizer", "First-aid kit (painkillers, plasters)", "Insect repellent", "Feminine hygiene"
                ],
                "Carry-On Essentials": [
                    "Passports/Wallet/Phone", "Meds (Prescriptions)", "Change of clothes", "Gum", "Fruit / Snacks", "Books (1-2 for plane)", "Neck pillow", "Empty water bottle", "Pen", "Valuables"
                ],
                "Baby Gear": [
                    "Baby Passport", "Car seat", "Travel Stroller", "Hip belt / Baby carrier (for Waitaks)", "Diaper bag", "Swim nappies", "Diapers & Wipes (plenty)", "Changing pad", "Breast pump", "Formula / Milk", "Baby feeding tools (plastic spoons/plate)", "Baby food/Snacks", "Bibs (Drool & Food)", "Bottles / Sippy cups", "Outfits (Layers)", "Pajamas", "Baby cot sheet", "Playmat / Quilted rug / Towel", "Books / Bedtime Book", "Whale mobile", "Meds (Paracetamol, Thermometer)", "Sun hat", "Baby sunscreen", "Baby monitor", "Sound machine"
                ],
                "Miscellaneous": [
                    "Spare bags (rubbish/laundry)", "Luggage tags", "Travel lock", "Sunglasses", "Umbrella"
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', initialize);

        function getStorageKey() {
            const type = document.getElementById('checklist-type').value;
            return `${type}_checklistState`;
        }
        
        function getDefaultState() {
            return {
                items: {},
                customItems: [],
                filter: 'all'
            };
        }

        function initialize() {
            const savedType = localStorage.getItem('checklistType') || 'overseas';
            document.getElementById('checklist-type').value = savedType;
            
            const state = JSON.parse(localStorage.getItem(getStorageKey())) || getDefaultState();
            document.getElementById('filter-packed').value = state.filter;

            populateChecklist();
            loadState();
        }

        function handleChecklistChange() {
            const selectedType = document.getElementById('checklist-type').value;
            localStorage.setItem('checklistType', selectedType);
            initialize();
        }
        
        function handleFilterChange() {
            const filterValue = document.getElementById('filter-packed').value;
            const state = JSON.parse(localStorage.getItem(getStorageKey())) || getDefaultState();
            state.filter = filterValue;
            localStorage.setItem(getStorageKey(), JSON.stringify(state));
            applyFilter();
        }

        function createChecklistItem(item, id, isCustom = false) {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'checklist-item';
            itemDiv.id = `item-${id}`;
            if (isCustom) {
                itemDiv.dataset.custom = true;
            }

            const itemName = document.createElement('span');
            itemName.textContent = item;

            const checkboxGroup = document.createElement('div');
            checkboxGroup.className = 'checkbox-group';

            const packedLabel = document.createElement('label');
            const packedCheckbox = document.createElement('input');
            packedCheckbox.type = 'checkbox';
            packedCheckbox.id = `packed-${id}`;
            packedCheckbox.onchange = () => saveAndRender();
            packedLabel.appendChild(packedCheckbox);
            packedLabel.appendChild(document.createTextNode('Packed'));
            
            const morningLabel = document.createElement('label');
            const morningCheckbox = document.createElement('input');
            morningCheckbox.type = 'checkbox';
            morningCheckbox.id = `morning-${id}`;
            morningCheckbox.onchange = () => saveAndRender();
            morningLabel.appendChild(morningCheckbox);
            morningLabel.appendChild(document.createTextNode('Pack in AM'));

            checkboxGroup.appendChild(packedLabel);
            checkboxGroup.appendChild(morningLabel);

            itemDiv.appendChild(itemName);
            itemDiv.appendChild(checkboxGroup);
            return itemDiv;
        }

        function populateChecklist() {
            const type = document.getElementById('checklist-type').value;
            const data = checklistData[type];
            const container = document.getElementById('checklist-container');
            container.innerHTML = '';

            // Render standard items
            for (const category in data) {
                const section = document.createElement('div');
                section.className = 'category-section';
                
                const title = document.createElement('h3');
                title.textContent = category;
                section.appendChild(title);

                data[category].forEach(item => {
                    // Create a somewhat unique ID based on category and item text
                    const safeKey = `${type}-${category}-${item}`.replace(/[^a-zA-Z0-9-]/g, '');
                    section.appendChild(createChecklistItem(item, safeKey));
                });
                container.appendChild(section);
            }

            // Render custom items
            const state = JSON.parse(localStorage.getItem(getStorageKey())) || getDefaultState();
            if (state.customItems.length > 0) {
                let customSection = document.getElementById('custom-items-section');
                if (!customSection) {
                    customSection = document.createElement('div');
                    customSection.className = 'category-section';
                    customSection.id = 'custom-items-section';
                    const title = document.createElement('h3');
                    title.textContent = "Custom Items";
                    customSection.appendChild(title);
                    container.appendChild(customSection);
                }
                // Clear existing custom items to prevent duplicates on re-render
                customSection.querySelectorAll('[data-custom="true"]').forEach(el => el.remove());

                state.customItems.forEach((item, index) => {
                    const id = `custom-${index}`;
                    customSection.appendChild(createChecklistItem(item.name, id, true));
                });
            }
        }
        
        function addCustomItem() {
            const input = document.getElementById('custom-item-input');
            const itemName = input.value.trim();
            if (!itemName) return;

            const state = JSON.parse(localStorage.getItem(getStorageKey())) || getDefaultState();
            state.customItems.push({ name: itemName, packed: false, morning: false, morningPacked: false });
            localStorage.setItem(getStorageKey(), JSON.stringify(state));

            input.value = '';
            populateChecklist();
            loadState();
        }

        function saveAndRender() {
            saveState();
            renderUIState();
        }

        function renderUIState() {
            const state = JSON.parse(localStorage.getItem(getStorageKey())) || getDefaultState();
            const morningListContainer = document.getElementById('morning-list');
            morningListContainer.innerHTML = '';
            let hasMorningItems = false;
            
            // Update main list items and populate morning list
            document.querySelectorAll('.checklist-item').forEach(itemDiv => {
                const id = itemDiv.id.replace('item-', '');
                const packedCheckbox = document.getElementById(`packed-${id}`);
                const morningCheckbox = document.getElementById(`morning-${id}`);
                const itemNameSpan = itemDiv.querySelector('span');

                // Apply 'completed' class to main list items
                if (packedCheckbox && packedCheckbox.checked) {
                    itemNameSpan.classList.add('completed');
                } else {
                    itemNameSpan.classList.remove('completed');
                }

                // Populate morning list
                if (morningCheckbox && morningCheckbox.checked) {
                    hasMorningItems = true;
                    const morningItemDiv = document.createElement('div');
                    morningItemDiv.className = 'morning-item';
                    morningItemDiv.id = `morning-item-${id}`; 

                    const packedMorningCheckbox = document.createElement('input');
                    packedMorningCheckbox.type = 'checkbox';
                    packedMorningCheckbox.id = `morning-packed-${id}`;
                    packedMorningCheckbox.className = 'checkbox-packed';
                    
                    // Get the state for this specific item
                    let itemState;
                    if (itemDiv.dataset.custom) {
                        const customIndex = parseInt(id.replace('custom-', ''));
                        itemState = state.customItems[customIndex];
                    } else {
                        itemState = state.items[id];
                    }

                    packedMorningCheckbox.checked = itemState?.morningPacked || false;

                    packedMorningCheckbox.onchange = () => {
                        const mainPackedCheckbox = document.getElementById(`packed-${id}`);
                        if (mainPackedCheckbox) {
                           mainPackedCheckbox.checked = packedMorningCheckbox.checked;
                        }
                        saveAndRender();
                    };
                    
                    const morningItemName = document.createElement('span');
                    morningItemName.textContent = itemNameSpan.textContent;
                    if (packedMorningCheckbox.checked) {
                        morningItemName.classList.add('completed');
                    }

                    morningItemDiv.appendChild(packedMorningCheckbox);
                    morningItemDiv.appendChild(morningItemName);
                    morningListContainer.appendChild(morningItemDiv);
                }
            });

            document.getElementById('morning-pack-container').style.display = hasMorningItems ? 'block' : 'none';
            applyFilter(); 
        }

        function saveState() {
            const state = JSON.parse(localStorage.getItem(getStorageKey())) || getDefaultState();
            state.items = {}; // Reset standard items
            state.customItems = []; // Reset custom items to rebuild from current UI

            document.querySelectorAll('.checklist-item').forEach(itemDiv => {
                const id = itemDiv.id.replace('item-', '');
                const packedCheckbox = document.getElementById(`packed-${id}`);
                const morningCheckbox = document.getElementById(`morning-${id}`);
                const morningPackedCheckbox = document.getElementById(`morning-packed-${id}`);
                
                const itemData = {
                    packed: packedCheckbox ? packedCheckbox.checked : false,
                    morning: morningCheckbox ? morningCheckbox.checked : false,
                    morningPacked: morningPackedCheckbox ? morningPackedCheckbox.checked : false
                };

                if (itemDiv.dataset.custom) {
                    itemData.name = itemDiv.querySelector('span').textContent;
                    state.customItems.push(itemData);
                } else {
                    state.items[id] = itemData;
                }
            });

            localStorage.setItem(getStorageKey(), JSON.stringify(state));
        }

        function loadState() {
            const state = JSON.parse(localStorage.getItem(getStorageKey())) || getDefaultState();

            // Load standard item states
            for (const id in state.items) {
                const packedCheckbox = document.getElementById(`packed-${id}`);
                const morningCheckbox = document.getElementById(`morning-${id}`);
                if (packedCheckbox && morningCheckbox) {
                    packedCheckbox.checked = state.items[id].packed;
                    morningCheckbox.checked = state.items[id].morning;
                }
            }

            // Load custom item states
            state.customItems.forEach((item, index) => {
                const id = `custom-${index}`;
                const packedCheckbox = document.getElementById(`packed-${id}`);
                const morningCheckbox = document.getElementById(`morning-${id}`);
                if (packedCheckbox && morningCheckbox) {
                    packedCheckbox.checked = item.packed;
                    morningCheckbox.checked = item.morning;
                }
            });

            renderUIState();
        }

        function applyFilter() {
            const filter = document.getElementById('filter-packed').value;
            
            // Filter main checklist items
            document.querySelectorAll('.checklist-item').forEach(itemDiv => {
                const id = itemDiv.id.replace('item-', '');
                const packedCheckbox = document.getElementById(`packed-${id}`);
                if (filter === 'unpacked' && packedCheckbox && packedCheckbox.checked) {
                    itemDiv.classList.add('hidden-packed');
                } else {
                    itemDiv.classList.remove('hidden-packed');
                }
            });

            // Filter 'Pack in AM' items
            document.querySelectorAll('.morning-item').forEach(morningItemDiv => {
                const id = morningItemDiv.id.replace('morning-item-', '');
                const packedMorningCheckbox = document.getElementById(`morning-packed-${id}`);
                if (filter === 'unpacked' && packedMorningCheckbox && packedMorningCheckbox.checked) {
                    morningItemDiv.classList.add('hidden-packed');
                } else {
                    morningItemDiv.classList.remove('hidden-packed');
                }
            });
        }

        function toggleSettings() {
            const content = document.getElementById('settings-content');
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        }

        function resetChecklist() {
            if(confirm("Are you sure you want to reset all checks and custom items for this list?")) {
                localStorage.removeItem(getStorageKey());
                initialize();
            }
        }
    </script>
</body>
</html>
